var fs = require('fs'),
model = require('model');
 
function ErrorScreen() {

	/*------------------------------------------------------------------
		Variables
	------------------------------------------------------------------*/
	var $ = model.$, el;
	var errorMsgStr;

	/*------------------------------------------------------------------
		Methods
	------------------------------------------------------------------*/
	function displayWhoops(msg) {
		$ = $ || model.$;

		var $el = $('.toolholder');
		errorMsgStr = msg;

		/*---------------
			Strings
		---------------*/
		var titleStr = "ShortHand repurposing tool";

		/*---------------
			Dom stuff
		---------------*/
		var appTitle = $('.appTitle');
		appTitle.html(titleStr);

		$el.empty();

		$el.load("../html/screens/errorScreen.html", errorScreenHtmlLoaded);

		/*---------------
			Listeners
		---------------*/

	}
	this.displayWhoops = displayWhoops;

	function errorScreenHtmlLoaded() {

		//errorMsgStr
		var errorP = $('.errorMsg p');
		errorP.html('ERROR: ' + errorMsgStr);

		$("#startAgainButton").click(function () {
			model.stateMachine.publishStateChange(model.appStates.START);
		});
	}

	/*------------------------------------------------------------------
		UTILITIES
	------------------------------------------------------------------*/

}
 
module.exports = new ErrorScreen();